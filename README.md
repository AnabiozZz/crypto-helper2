# crypto-helper2
Очередная попытка обуздать крипторынок. Теперь с навыками датасайентиста.
Программа прогнозирует точки поворота инструмента используя прошлую корреляцию с заданными индикаторами

## Использование ##

``` ch.py -i %path_to_ohlc.csv% -c %path_to_config.json% ```

параметр -i содержит путь к файлу со свечами для анализа
параметр -c содержит путь к файлу с конфигурацией. Пример конфигурации:

```
{
    "stage_check": [
        {"gap_tolerance_n": 0},
        {"min_value": 0},
        {"max_value": 1000000}
    ],
    "stage_prepare": [
        {"aggregate_n": 60},
        {"slice_start": "2025-10-27T09:52:00"},
        {"slice_end": "2025-10-28T09:52:00"}
    ],
    "stage_peaks_detect": [
        {"point": "close"},
        {"threshold": 0.05}
    ],
    "indicators": [
        {"type": "trendlines_auto", "point": "close"},
        {"type": "h_vol", "step": 1000}
    ],
    "stage_regression": [
        {"threshold": 0.7},
        {"learn_test_ratio": 5}
    ]
}
```

## Принцип работы ##

Входные данные проходят этапы:
1. Фильтрация: проверяется наличие значительных пропусков и валидность значений
2. Подгототовка: данные масштабируются под запрашиваемые интервалы и обрезаются по времени
3. Определние вершин и оснований: между локальными экстремумами определяется отклонение. Если отклонения до и после экстремума значительнее порога, то такая точка определяется как вершина или основание, в зависимости от направления дальнейшего движения.

Далее для каждого отклонения между вершинами и основаниями вычисляется корреляция с заданными индикаторами
Значения корреляции выше заданного порога используются для построения логистической регрессии. Для обучения и тестировния вершины и основания разбиваются по времени с заданным коофицентом